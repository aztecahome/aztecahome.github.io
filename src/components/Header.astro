---
import AztecaLogo from "./AztecaLogo.astro";

const pathname = new URL(Astro.request.url).pathname;
const otherPathname =
  pathname.slice(-1) === "/" ? pathname.slice(0, -1) : pathname; // remove the last "/"
const paths = [
  { url: "/", name: "Home" },
  { url: "/pest-control", name: "Pest Control" },
  { url: "/pools", name: "Pools" },
  { url: "/landscaping", name: "Landscaping" },
  { url: "/contact", name: "Contact" },
];
---

<header
  class="sticky top-[-170px] z-20 bg-[var(--nav-background)] shadow-lg md:top-0 md:flex md:justify-between"
>
  <div class="flex w-full justify-center">
    <a href="/">
      <AztecaLogo class="max-w-[225px]" data-turbo-permanent id="headerLogo" />
    </a>
  </div>
  <div class="md:flex md:flex-col md:justify-between">
    <div
      class="mx-3 my-1 flex h-full flex-wrap items-center justify-center md:justify-end"
    >
      <svg
        class="mx-1 h-[20px] w-[20px] shrink-0 animate-[wiggle_15s_linear_infinite_15s] fill-army-900"
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 0 24 24"
        width="24px"
        fill="#000000"
      >
        <path
          d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"
        ></path>
      </svg>
      <a
        href="tel:602-926-2021"
        class="text-center text-xl font-bold text-army-900">(602)-926-2021</a
      >
    </div>
    <nav class="font-sans font-semibold text-army-900">
      <ul
        class="flex flex-wrap justify-center pb-1 md:grid md:auto-cols-max md:grid-flow-col-dense md:grid-cols-none md:pb-0"
        role="menubar"
      >
        {
          paths.map((path) => (
            <li class="contents" role="none">
              <a
                class={`col-span-4 m-1 whitespace-nowrap rounded px-3
                        py-3 text-center underline transition-all ease-out hover:bg-army-400 md:col-auto md:m-0
                      md:rounded-none
                        md:border-b-8 md:pb-2 md:no-underline
                        md:active:pb-0 md:active:pt-4
                        ${
                          pathname === path.url || otherPathname === path.url
                            ? "border-army-900 bg-army-900 text-army-50 no-underline md:bg-army-300 md:text-army-900"
                            : " border-transparent bg-army-300 md:bg-transparent "
                        }`}
                href={path.url}
                aria-current={pathname === path.url ? "true" : "false"}
                role="menuitem"
                data-turbo-preload
              >
                {path.name}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </div>
  <div
    class="flex flex-col items-center justify-center bg-red-600 p-2 w-full text-red-50"
  >
    <h3 class="text-xl">Last Drop-Off/Donation:</h3>
    <p>
      August 30th <span
        class="daysLeft bg-red-50 text-red-900 rounded-lg px-2 whitespace-nowrap"
        >27 days left!</span
      >
    </p>
  </div>
</header>
<style is:global>
  :root {
    --nav-background: theme(colors.army.200);
  }

  @keyframes wiggle {
    0% {
      transform: rotate(0deg);
    }
    1.786% {
      transform: rotate(20deg);
    }
    2.679% {
      transform: rotate(-20deg);
    }
    3.571% {
      transform: rotate(20deg);
    }
    4.464% {
      transform: rotate(-20deg);
    }
    5.357% {
      transform: rotate(20deg);
    }
    7.143% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
</style>
